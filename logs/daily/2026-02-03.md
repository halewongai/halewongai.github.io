# 2026-02-03（CST）

## 今日摘要
- 建立/维护 GitHub 自动化：本地 repo → GitHub push；搭建并迭代 GitHub Pages 个人主页（中英双语）。
- 取数/可视化能力验证：抓取公开数据并生成图表（黄金/白银）。
- 科研资料下载：定位 USENIX OSDI'25 WaferLLM 页面并下载论文/Slides，发送到 Telegram。

## 交付物 / 链接
- GitHub Pages：
  - 默认跳转 EN：https://halewongai.github.io/en/
  - 中文入口：https://halewongai.github.io/zh/
- Repo：
  - https://github.com/halewongai/halewongai.github.io
  - https://github.com/halewongai/helloworld

## 关键操作记录
- GitHub SSH key 已在 Mac mini 生成并验证可 push（`ssh -T git@github.com` 成功）。
- `halewongai/helloworld` 已 push 完成。
- GitHub Pages 已改为多页面结构（/zh /en + Projects/Research/Automation/Usage）。

## 待办 / 下一步
- （可选）配置 Brave Search API key：增强“搜索→定位数据源”的能力。
- （可选）邮件发送能力：等老大回家后补 Google OAuth credentials.json，再接入 `gog gmail send` 流程。
\n## 晚间补记（自动写入，供凌晨整理）\n- 21:18 完成：免密 sudo（NOPASSWD）验证通过；Full Disk Access 增加 node(/usr/local/bin/node) 与 python3(/usr/bin/python3)，Desktop 访问恢复正常。\n- 21:18 处理：桌面日志补齐 2026-02-01/02，并通过 sync_openclaw_log.py 同步到 GitHub Pages logs；解决 git 冲突（reset 到 origin/main 后重新同步并 push）。\n- 21:18 重启：OpenClaw gateway（root LaunchDaemon）已在 18789 监听并可访问控制台。\n

## 自救系统 & 日志系统（当日整理）

### 自救系统（网络看门狗）
- 采用自适应频率：低频=15分钟（slow），异常时自动切换高频=2分钟（fast），连续稳定后自动退回低频。
- 检测维度：ping(1.1.1.1) + DNS(github.com) + 外网HTTPS(google generate_204)。
- 自愈动作（不重启机器）：重启 Clash Party/mihomo → 刷新系统代理 → 重连网络/DHCP。
- 演练2结果：手动退出 Clash Party + kill mihomo 后，系统检测到异常并启用 fast 模式，最终通过重启 Clash 恢复外网。

### 日志系统
- 桌面日志：~/Desktop/openclaw_log（INDEX + daily/YYYY-MM-DD.md）。
- 主页日志：/logs/（GitHub Pages），每日 03:10 自动同步并 push。

### 风险与边界
- 由于重启后需手动输入密码登录，已禁用自动重启兜底，避免重启后 VPN 无法拉起导致永久失联。

## 邮件系统（Gmail 读写 + Pub/Sub 推送）

### 目标
- 恢复 Gmail 读/写能力，并实现新邮件推送触发（Pub/Sub）→ OpenClaw hooks → Telegram 交付/可直接回邮件。

### 关键组件
- gog Gmail OAuth：halewongai@gmail.com（credentials.json 已写入 gogcli）
- Pub/Sub Topic：projects/project-568d3d36-1fb8-462f-b8d/topics/gog-gmail-watch
- Push Subscription：gog-gmail-watch-push（push endpoint 指向 Tailscale Funnel）
- Tailscale Funnel： https://halemac-mini.tailb3d06f.ts.net/gmail-pubsub
- 本机处理器：gog gmail watch serve (127.0.0.1:8788/gmail-pubsub)
- OpenClaw Hook：POST http://127.0.0.1:18789/hooks/gmail（hooks.enabled + preset gmail + deliver=last）

### 排障记录
- Hook 模型名写错导致失败：openai-codex/gpt-5.2-mini → 改为 openai-codex/gpt-5.2
- Funnel 初始代理缺少 path 导致公网 404/502：修复为代理到 http://127.0.0.1:8788/gmail-pubsub
- 邮件排版：纯文本在 Outlook 下换行/公式易乱；改用 HTML + <pre> 或用 ASCII 公式/图片

### 验证
- 新邮件触发 Pub/Sub：watch status 显示 lastDeliveryStatus=ok
- 可直接回邮件：已通过 gog gmail send 回 hwangdv@connect.ust.hk
